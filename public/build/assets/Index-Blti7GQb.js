import{a as S,r as l,j as e,H as F,y as m,b as D}from"./app-BQKhlG_j.js";import{c as P,A as E}from"./AuthenticatedLayout-Di_LMxhS.js";import{L as k}from"./loader-circle-D9H4bbfS.js";import"./ApplicationLogo-C87hsTeG.js";const T=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],C=P("trash-2",T);function U(){const{flash:b,pdfs:j}=S().props,[d,p]=l.useState(""),[f,x]=l.useState(null),[h,g]=l.useState(j||[]),[i,c]=l.useState(!1),[u,o]=l.useState([]),[y,n]=l.useState(b?.success||""),N=async t=>{if(t.preventDefault(),c(!0),o([]),n(""),!d||!f){o(["Title and PDF file are required."]),c(!1);return}const a=new FormData;a.append("title",d),a.append("pdf_file",f);try{const s=await D.post("/sample-pdfs",a,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}});s.data.success?(n(s.data.message),g(r=>[...r,s.data.pdf]),p(""),x(null)):(n(s.data.message||"Upload failed."),s.data.errors&&o(Object.values(s.data.errors).flat()))}catch(s){if(console.error(s),s.response?.status===422){const r=Object.values(s.response.data.errors).flat();o(r),n("Validation failed.")}else n("Failed to upload PDF. Please try again.")}finally{c(!1)}};return e.jsxs(E,{title:"Sample PDFs",children:[e.jsx(F,{title:"Sample PDFs"}),e.jsx("div",{className:"flex flex-col items-center w-full px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-xl bg-white rounded-xl shadow-lg p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 text-center",children:"Upload Sample PDF"}),y&&e.jsx("div",{className:`p-3 rounded ${u.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y}),u.length>0&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:e.jsx("ul",{className:"list-disc list-inside text-sm",children:u.map((t,a)=>e.jsx("li",{children:t},a))})}),e.jsxs("form",{onSubmit:N,className:"flex flex-col space-y-4",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:d,onChange:t=>p(t.target.value),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"font-medium text-gray-700",children:"Select PDF:"}),e.jsx("input",{type:"file",name:"pdf_file",accept:"application/pdf",onChange:t=>x(t.target.files[0]),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"submit",disabled:i,className:`px-6 py-3 text-white font-medium rounded-lg shadow bg-blue-600 hover:bg-blue-700 transition flex items-center justify-center gap-2 ${i?"bg-gray-400 cursor-not-allowed":""}`,children:[i&&e.jsx(k,{className:"h-5 w-5 animate-spin"}),i?"Uploading...":"Upload PDF"]})]}),h.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded PDFs:"}),e.jsx("ul",{className:"space-y-2",children:h.map(t=>e.jsxs("li",{className:"border p-2 rounded flex justify-between items-center",children:[e.jsx("span",{children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:t.path}),e.jsx("button",{onClick:async()=>{if(confirm(`Delete "${t.title}"?`))try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r=await(await fetch(`/sample-pdfs/${t.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":a,Accept:"application/json"}})).json();r.success?(m.success(r.message),g(v=>v.filter(w=>w.id!==t.id))):m.error(r.message||"Failed to delete.")}catch(a){console.error(a),m.error("Error deleting PDF.")}},className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:e.jsx(C,{className:"h-4 w-4"})})]})]},t.id))})]})]})})]})}export{U as default};
