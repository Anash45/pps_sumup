import{a as D,r as l,j as e,H as P,y as p,b as E}from"./app-BqF74LPn.js";import{c as k,A as C}from"./AuthenticatedLayout-D2_J9mOf.js";import{L as T}from"./loader-circle-DbFtzJ50.js";import"./ApplicationLogo-I6FS1fT4.js";const q=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],L=k("trash-2",q);function O(){const{flash:j,pdfs:N}=D().props,[d,m]=l.useState(""),[x,f]=l.useState(null),[h,g]=l.useState(N||[]),[o,c]=l.useState(!1),[u,i]=l.useState([]),[y,n]=l.useState(j?.success||""),[b,v]=l.useState(";"),S=async t=>{if(t.preventDefault(),c(!0),i([]),n(""),!d||!x){i(["Title and PDF file are required."]),c(!1);return}const a=new FormData;a.append("title",d),a.append("pdf_file",x),a.append("separator",b);try{const s=await E.post("/sample-pdfs",a,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}});s.data.success?(n(s.data.message),g(r=>[...r,s.data.pdf]),m(""),f(null)):(n(s.data.message||"Upload failed."),s.data.errors&&i(Object.values(s.data.errors).flat()))}catch(s){if(console.error(s),s.response?.status===422){const r=Object.values(s.response.data.errors).flat();i(r),n("Validation failed.")}else n("Failed to upload PDF. Please try again.")}finally{c(!1)}};return e.jsxs(C,{title:"Sample PDFs",children:[e.jsx(P,{title:"Sample PDFs"}),e.jsx("div",{className:"flex flex-col items-center w-full px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-xl bg-white rounded-xl shadow-lg p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 text-center",children:"Upload Print PDF"}),y&&e.jsx("div",{className:`p-3 rounded ${u.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y}),u.length>0&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:e.jsx("ul",{className:"list-disc list-inside text-sm",children:u.map((t,a)=>e.jsx("li",{children:t},a))})}),e.jsxs("form",{onSubmit:S,className:"flex flex-col space-y-4",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:d,onChange:t=>m(t.target.value),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"font-medium text-gray-700",children:"Select PDF:"}),e.jsx("input",{type:"file",name:"pdf_file",accept:"application/pdf",onChange:t=>f(t.target.files[0]),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"font-medium text-gray-700",children:"Separator:"}),e.jsx("input",{type:"text",name:"separator",value:b,onChange:t=>v(t.target.value),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter separator",required:!0}),e.jsxs("button",{type:"submit",disabled:o,className:`px-6 py-3 text-white font-medium rounded-lg shadow bg-blue-600 hover:bg-blue-700 transition flex items-center justify-center gap-2 ${o?"bg-gray-400 cursor-not-allowed":""}`,children:[o&&e.jsx(T,{className:"h-5 w-5 animate-spin"}),o?"Uploading...":"Upload PDF"]})]}),h.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded PDFs:"}),e.jsx("ul",{className:"space-y-2",children:h.map(t=>e.jsxs("li",{className:"border p-2 rounded flex justify-between items-center",children:[e.jsx("span",{children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:t.path}),e.jsx("button",{onClick:async()=>{if(confirm(`Delete "${t.title}"?`))try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r=await(await fetch(`/sample-pdfs/${t.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":a,Accept:"application/json"}})).json();r.success?(p.success(r.message),g(w=>w.filter(F=>F.id!==t.id))):p.error(r.message||"Failed to delete.")}catch(a){console.error(a),p.error("Error deleting PDF.")}},className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:e.jsx(L,{className:"h-4 w-4"})})]})]},t.id))})]})]})})]})}export{O as default};
