import{a as D,r as l,j as e,H as P,y as m,b as F}from"./app-DjRFRhHK.js";import{c as S,A as k}from"./AuthenticatedLayout-CJfkBqLb.js";import{L as E}from"./loader-circle-DpI3gstb.js";import"./ApplicationLogo-BziOqfG3.js";const L=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],M=S("trash-2",L);function C(){const{flash:b,pdfs:j}=D().props,[d,p]=l.useState(""),[x,f]=l.useState(null),[h,g]=l.useState(j||[]),[i,c]=l.useState(!1),[u,o]=l.useState([]),[y,n]=l.useState(b?.success||""),N=async s=>{if(s.preventDefault(),c(!0),o([]),n(""),!d||!x){o(["Title and PDF file are required."]),c(!1);return}const a=new FormData;a.append("title",d),a.append("pdf_file",x);try{const t=await F.post("/sample-pdfs",a,{});t.data.success?(n(t.data.message),g(r=>[...r,t.data.pdf]),p(""),f(null)):(n(t.data.message||"Upload failed."),t.data.errors&&o(Object.values(t.data.errors).flat()))}catch(t){if(console.error(t),t.response?.status===422){const r=Object.values(t.response.data.errors).flat();o(r),n("Validation failed.")}else n("Failed to upload PDF. Please try again.")}finally{c(!1)}};return e.jsxs(k,{title:"Sample PDFs",children:[e.jsx(P,{title:"Sample PDFs"}),e.jsx("div",{className:"flex flex-col items-center w-full px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-xl bg-white rounded-xl shadow-lg p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 text-center",children:"Upload Print PDF"}),y&&e.jsx("div",{className:`p-3 rounded ${u.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y}),u.length>0&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:e.jsx("ul",{className:"list-disc list-inside text-sm",children:u.map((s,a)=>e.jsx("li",{children:s},a))})}),e.jsxs("form",{onSubmit:N,className:"flex flex-col space-y-4",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:d,onChange:s=>p(s.target.value),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"font-medium text-gray-700",children:"Select PDF:"}),e.jsx("input",{type:"file",name:"pdf_file",accept:"application/pdf",onChange:s=>f(s.target.files[0]),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"submit",disabled:i,className:`px-6 py-3 text-white font-medium rounded-lg shadow bg-blue-600 hover:bg-blue-700 transition flex items-center justify-center gap-2 ${i?"bg-gray-400 cursor-not-allowed":""}`,children:[i&&e.jsx(E,{className:"h-5 w-5 animate-spin"}),i?"Uploading...":"Upload PDF"]})]}),h.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded PDFs:"}),e.jsx("ul",{className:"space-y-2",children:h.map(s=>e.jsxs("li",{className:"border p-2 rounded flex justify-between items-center",children:[e.jsx("span",{children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:s.path}),e.jsx("button",{onClick:async()=>{if(confirm(`Delete "${s.title}"?`))try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),r=await(await fetch(`/sample-pdfs/${s.id}`,{method:"DELETE"})).json();r.success?(m.success(r.message),g(v=>v.filter(w=>w.id!==s.id))):m.error(r.message||"Failed to delete.")}catch(a){console.error(a),m.error("Error deleting PDF.")}},className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:e.jsx(M,{className:"h-4 w-4"})})]})]},s.id))})]})]})})]})}export{C as default};
