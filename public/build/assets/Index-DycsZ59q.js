import{a as D,r,b as m,j as e,H as F,y as d}from"./app-BLgvgB3y.js";import{c as P,A as S}from"./AuthenticatedLayout-BheIhv_n.js";import{L as k}from"./loader-circle-cIbIAt8w.js";import"./ApplicationLogo-D3a6BXgq.js";const E=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],C=P("trash-2",E);function _(){const{flash:j,pdfs:N}=D().props,[c,f]=r.useState(""),[x,h]=r.useState(null),[g,y]=r.useState(N||[]),[i,u]=r.useState(!1),[p,o]=r.useState([]),[b,l]=r.useState(j?.success||"");r.useEffect(()=>{const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");s&&(m.defaults.headers.common["X-CSRF-TOKEN"]=s)},[]);const v=async s=>{if(s.preventDefault(),u(!0),o([]),l(""),!c||!x){o(["Title and PDF file are required."]),u(!1);return}const a=new FormData;a.append("title",c),a.append("pdf_file",x);try{const t=await m.post("/sample-pdfs",a,{headers:{"Content-Type":"multipart/form-data"}});t.data.success?(l(t.data.message),y(n=>[...n,t.data.pdf]),f(""),h(null)):(l(t.data.message||"Upload failed."),t.data.errors&&o(Object.values(t.data.errors).flat()))}catch(t){if(console.error(t),t.response?.status===422){const n=Object.values(t.response.data.errors).flat();o(n),l("Validation failed.")}else t.response?.status===419?l("Session expired. Refresh the page and try again."):l("Failed to upload PDF. Please try again.")}finally{u(!1)}},w=async s=>{if(confirm(`Delete "${s.title}"?`))try{const a=await m.delete(`/sample-pdfs/${s.id}`,{headers:{Accept:"application/json"}});a.data.success?(d.success(a.data.message),y(t=>t.filter(n=>n.id!==s.id))):d.error(a.data.message||"Failed to delete PDF.")}catch(a){console.error(a),a.response?.status===419?d.error("Session expired. Refresh the page and try again."):d.error("Error deleting PDF.")}};return e.jsxs(S,{title:"Sample PDFs",children:[e.jsx(F,{title:"Sample PDFs"}),e.jsx("div",{className:"flex flex-col items-center w-full px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-xl bg-white rounded-xl shadow-lg p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 text-center",children:"Upload Print PDF"}),b&&e.jsx("div",{className:`p-3 rounded ${p.length>0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:b}),p.length>0&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:e.jsx("ul",{className:"list-disc list-inside text-sm",children:p.map((s,a)=>e.jsx("li",{children:s},a))})}),e.jsxs("form",{onSubmit:v,className:"flex flex-col space-y-4",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:c,onChange:s=>f(s.target.value),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"font-medium text-gray-700",children:"Select PDF:"}),e.jsx("input",{type:"file",name:"pdf_file",accept:"application/pdf",onChange:s=>h(s.target.files[0]),required:!0,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"submit",disabled:i,className:`px-6 py-3 text-white font-medium rounded-lg shadow bg-blue-600 hover:bg-blue-700 transition flex items-center justify-center gap-2 ${i?"bg-gray-400 cursor-not-allowed":""}`,children:[i&&e.jsx(k,{className:"h-5 w-5 animate-spin"}),i?"Uploading...":"Upload PDF"]})]}),g.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Uploaded PDFs:"}),e.jsx("ul",{className:"space-y-2",children:g.map(s=>e.jsxs("li",{className:"border p-2 rounded flex justify-between items-center",children:[e.jsx("span",{children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:s.path}),e.jsx("button",{onClick:()=>w(s),className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition",children:e.jsx(C,{className:"h-4 w-4"})})]})]},s.id))})]})]})})]})}export{_ as default};
